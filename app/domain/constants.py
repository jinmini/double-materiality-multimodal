# app/domain/constants.py

# ==============================================================================
# 🌍 범용 ESG 키워드 사전 (국제 표준 기반)
# GRI, SASB, TCFD, K-ESG 가이드라인 통합
# ==============================================================================

# 1. 국제 표준 기반 범용 ESG 이슈 분류
UNIVERSAL_ESG_ISSUES = {
    "환경(E)": {
        "기후변화 대응": {
            "description": "온실가스 감축, 탄소중립, 기후변화 적응",
            "core_keywords": ["기후변화", "온실가스", "탄소중립", "넷제로", "탄소배출", "탄소감축"],
            "advanced_keywords": ["TCFD", "SBTi", "RE100", "탄소회계", "Scope1", "Scope2", "Scope3"],
            "industry_variants": {
                "전력": ["발전", "전력공급", "에너지전환", "신재생에너지"],
                "제조": ["공정효율", "에너지절약", "산업공정"],
                "금융": ["그린파이낸싱", "탄소리스크", "기후리스크"],
                "건설": ["친환경건축", "그린빌딩", "에너지효율"],
                "IT": ["그린데이터센터", "전력효율", "디지털탄소발자국"]
            }
        },
        "자원 및 폐기물 관리": {
            "description": "순환경제, 폐기물 감축, 자원효율성",
            "core_keywords": ["폐기물", "재활용", "순환경제", "자원효율", "용수관리"],
            "advanced_keywords": ["3R", "업사이클링", "제로웨이스트", "LCA"],
            "industry_variants": {
                "전력": ["석탄재", "폐열활용", "용수재이용"],
                "제조": ["생산폐기물", "원재료효율", "부산물활용"],
                "유통": ["포장재", "물류최적화", "재고관리"]
            }
        },
        "생물다양성 보전": {
            "description": "생태계 보호, 자연자본, 생물다양성",
            "core_keywords": ["생물다양성", "생태계", "자연보전", "환경영향평가"],
            "advanced_keywords": ["TNFD", "자연자본", "생태계서비스", "서식지보전"],
            "industry_variants": {
                "전력": ["환경영향", "생태계복원", "어류보호"],
                "건설": ["환경복원", "녹지조성", "서식지보전"],
                "농업": ["토양보전", "농약저감", "유기농업"]
            }
        },
        "환경경영": {
            "description": "환경관리시스템, 환경법규 준수",
            "core_keywords": ["환경경영", "ISO14001", "환경법규", "환경모니터링"],
            "advanced_keywords": ["EMS", "환경감사", "환경회계", "그린조달"],
            "industry_variants": {
                "전력": ["배출허가", "환경측정", "대기질관리"],
                "화학": ["화학물질관리", "배출저감", "환경안전"]
            }
        }
    },
    
    "사회(S)": {
        "안전보건": {
            "description": "산업안전, 근로자 건강, 안전문화",
            "core_keywords": ["안전보건", "산업안전", "작업안전", "안전관리", "사고예방"],
            "advanced_keywords": ["OHSAS18001", "ISO45001", "안전문화", "무재해"],
            "industry_variants": {
                "전력": ["전기안전", "고소작업", "화재예방"],
                "건설": ["건설안전", "추락방지", "안전장비"],
                "제조": ["기계안전", "화학안전", "작업환경"]
            }
        },
        "인권경영": {
            "description": "인권보호, 차별금지, 강제노동 금지",
            "core_keywords": ["인권경영", "인권", "차별금지", "강제노동", "아동노동"],
            "advanced_keywords": ["UN기업과인권이행원칙", "인권영향평가", "구제절차"],
            "industry_variants": {
                "전력": ["지역주민", "원주민권리", "토지수용"],
                "제조": ["공급망인권", "근로조건", "이주노동자"],
                "IT": ["개인정보", "디지털권리", "알고리즘편향"]
            }
        },
        "다양성 및 포용": {
            "description": "성별다양성, 포용성, 평등한 기회",
            "core_keywords": ["다양성", "포용성", "성평등", "장애인고용", "세대통합"],
            "advanced_keywords": ["DE&I", "무의식편견", "포용문화", "접근성"],
            "industry_variants": {
                "전력": ["여성임원", "지역인재", "청년고용"],
                "IT": ["기술격차", "디지털접근성", "STEM다양성"],
                "금융": ["금융포용", "취약계층", "디지털격차"]
            }
        },
        "지역사회": {
            "description": "지역경제 기여, 사회공헌, 상생협력",
            "core_keywords": ["지역사회", "사회공헌", "상생협력", "지역경제", "사회적가치"],
            "advanced_keywords": ["CSV", "사회적투자", "임팩트측정", "지역상생"],
            "industry_variants": {
                "전력": ["지역발전", "전력안정공급", "지역일자리"],
                "유통": ["지역상권", "중소기업지원", "농어촌상생"],
                "금융": ["지역금융", "서민금융", "사회적금융"]
            }
        },
        "고객 및 제품책임": {
            "description": "제품안전, 고객만족, 품질경영",
            "core_keywords": ["제품안전", "고객만족", "품질경영", "서비스품질"],
            "advanced_keywords": ["ISO9001", "고객권리", "제품책임", "품질보증"],
            "industry_variants": {
                "전력": ["전력품질", "정전최소화", "고객서비스"],
                "IT": ["정보보안", "서비스안정성", "사용자경험"],
                "식품": ["식품안전", "영양정보", "알레르기표시"]
            }
        },
        "공급망 관리": {
            "description": "공급망 ESG, 협력회사 관리",
            "core_keywords": ["공급망", "협력회사", "ESG협력", "동반성장"],
            "advanced_keywords": ["공급망실사", "ESG평가", "지속가능조달"],
            "industry_variants": {
                "전력": ["건설협력사", "정비협력사", "안전관리"],
                "제조": ["글로벌공급망", "품질관리", "비용절감"],
                "유통": ["물류최적화", "협력사지원", "상생협력"]
            }
        }
    },
    
    "지배구조(G)": {
        "윤리경영": {
            "description": "부패방지, 윤리강령, 컴플라이언스",
            "core_keywords": ["윤리경영", "부패방지", "반부패", "청렴", "컴플라이언스"],
            "advanced_keywords": ["ISO37001", "내부신고", "윤리교육", "이해충돌방지"],
            "industry_variants": {
                "전력": ["공기업윤리", "공정거래", "투명경영"],
                "금융": ["금융윤리", "이해상충", "준법감시"],
                "건설": ["건설윤리", "투명입찰", "하도급법"]
            }
        },
        "이사회 및 지배구조": {
            "description": "이사회 독립성, 투명성, 책임경영",
            "core_keywords": ["이사회", "지배구조", "독립성", "투명성", "책임경영"],
            "advanced_keywords": ["사외이사", "이사회평가", "경영감독", "주주권익"],
            "industry_variants": {
                "전력": ["공기업지배구조", "경영공시", "성과관리"],
                "금융": ["금융지배구조", "리스크관리", "내부통제"],
                "대기업": ["지배구조개선", "소액주주", "경영투명성"]
            }
        },
        "리스크 관리": {
            "description": "통합리스크 관리, 내부통제, 위기관리",
            "core_keywords": ["리스크관리", "내부통제", "위기관리", "통합리스크"],
            "advanced_keywords": ["ERM", "내부감사", "통제시스템", "비상계획"],
            "industry_variants": {
                "전력": ["전력계통", "설비리스크", "공급안정성"],
                "금융": ["신용리스크", "시장리스크", "운영리스크"],
                "IT": ["사이버보안", "데이터보안", "시스템장애"]
            }
        },
        "정보보안": {
            "description": "개인정보보호, 사이버보안, 정보관리",
            "core_keywords": ["정보보안", "개인정보보호", "사이버보안", "데이터보호"],
            "advanced_keywords": ["ISO27001", "GDPR", "ISMS", "암호화"],
            "industry_variants": {
                "전력": ["제어시스템보안", "스마트그리드", "중요정보"],
                "금융": ["금융보안", "고객정보", "전자금융"],
                "IT": ["클라우드보안", "AI윤리", "빅데이터"]
            }
        }
    }
}

# 2. 중대성 평가 관련 키워드
MATERIALITY_KEYWORDS = [
    # 한국어 중대성 키워드
    "중대성", "중요성", "핵심이슈", "우선순위", "materiality", "중대성평가", 
    "이해관계자", "stakeholder", "중요도", "영향도", "관심도",
    "매트릭스", "matrix", "평가", "assessment", "분석", "analysis",
    
    # 평가 지표
    "높음", "보통", "낮음", "상", "중", "하", "high", "medium", "low",
    "1순위", "2순위", "3순위", "우선", "차순위",
    
    # 🔥 추가: 실제 보고서에서 자주 사용되는 표현들
    "핵심", "주요", "중요", "우선순위", "관심사", "이슈", "과제",
    "영향", "리스크", "기회", "도전", "관리", "대응", "개선",
    "지속가능", "지속가능성", "지속가능경영", "ESG경영", "ESG",
    "환경경영", "사회적책임", "기업시민", "윤리경영",
    
    # 테이블/표 형식 인식
    "│", "─", "┌", "┐", "└", "┘", "├", "┤", "┬", "┴", "┼",
    "table", "표", "도표", "그래프", "chart", "목록", "현황"
]

# 3. 업종별 특화 키워드 매핑
INDUSTRY_SPECIFIC_KEYWORDS = {
    "전력": {
        "primary_indicators": ["발전", "전력", "에너지", "전기", "송배전", "변전"],
        "business_keywords": ["화력", "원자력", "신재생", "수력", "태양광", "풍력", "ESS"],
        "stakeholders": ["전력거래소", "한전", "지역주민", "정부", "환경부"]
    },
    "제조": {
        "primary_indicators": ["제조", "생산", "공장", "설비", "품질", "공정"],
        "business_keywords": ["자동화", "스마트팩토리", "품질관리", "원자재", "완제품"],
        "stakeholders": ["협력회사", "고객", "근로자", "지역사회", "정부"]
    },
    "금융": {
        "primary_indicators": ["금융", "은행", "보험", "증권", "투자", "대출"],
        "business_keywords": ["ESG금융", "그린본드", "리스크관리", "디지털금융"],
        "stakeholders": ["고객", "주주", "금융당국", "지역사회", "정부"]
    },
    "IT": {
        "primary_indicators": ["IT", "소프트웨어", "플랫폼", "데이터", "AI", "클라우드"],
        "business_keywords": ["디지털전환", "사이버보안", "데이터센터", "알고리즘"],
        "stakeholders": ["사용자", "개발자", "데이터주체", "정부", "글로벌사회"]
    }
}

# 4. 자동 업종 감지를 위한 키워드
AUTO_INDUSTRY_DETECTION = {
    "전력": [
        # 발전회사 명시적 키워드
        "발전소", "발전회사", "발전사업", "한국중부발전", "한국남부발전", "한국동서발전", 
        "한국남동발전", "한국서부발전", "한국수력원자력", "한전", "한국전력",
        # 전력 관련 핵심 키워드
        "화력발전", "원자력발전", "수력발전", "풍력발전", "태양광발전", "신재생발전",
        "송배전", "변전소", "전력계통", "전력공급", "전력시스템", "발전설비",
        # 에너지 전환 키워드
        "에너지전환", "재생에너지", "친환경에너지", "탄소중립발전"
    ],
    "제조": [
        "제조업", "제조회사", "생산공장", "제조공정", "생산설비", "제조시설",
        "철강", "화학", "자동차제조", "조선", "기계제조", "전자제조",
        "생산라인", "공장운영", "제품생산", "제조기술"
    ],
    "금융": [
        "은행", "금융회사", "보험회사", "증권회사", "카드회사", "캐피탈",
        "금융서비스", "금융업", "은행업", "보험업", "증권업", "자산운용",
        "금융상품", "대출", "투자", "자산관리"
    ],
    "건설": [
        "건설회사", "건설업", "시공", "부동산개발", "건설사업", "토목공사",
        "건축", "아파트건설", "인프라건설", "플랜트건설", "건설기술"
    ],
    "유통": [
        "유통업", "유통회사", "마트", "백화점", "온라인쇼핑", "리테일",
        "유통서비스", "물류", "배송", "소매업", "도매업", "유통망"
    ],
    "IT": [
        "IT회사", "소프트웨어회사", "게임회사", "플랫폼기업", "테크기업",
        "소프트웨어개발", "IT서비스", "웹서비스", "모바일앱", "클라우드서비스",
        "인터넷기업", "디지털서비스", "IT솔루션"
    ],
    "통신": [
        "통신회사", "통신업", "통신서비스", "이동통신", "네트워크",
        "5G", "통신망", "데이터통신", "통신기술"
    ],
    "항공": [
        "항공회사", "항공업", "항공운송", "공항운영", "항공기",
        "항공서비스", "운항", "승객운송", "화물운송"
    ],
    "해운": [
        "해운회사", "해운업", "선박운송", "해상운송", "항만",
        "컨테이너", "물류운송", "선박관리", "해운서비스"
    ]
}

# 5. ESG 이슈 우선순위 가중치 (업종별)
ISSUE_PRIORITY_WEIGHTS = {
    "전력": {
        "기후변화 대응": 0.25,
        "안전보건": 0.20,
        "지역사회": 0.15,
        "환경경영": 0.15,
        "윤리경영": 0.10,
        "리스크 관리": 0.10,
        "정보보안": 0.05
    },
    "제조": {
        "기후변화 대응": 0.20,
        "안전보건": 0.20,
        "자원 및 폐기물 관리": 0.15,
        "고객 및 제품책임": 0.15,
        "공급망 관리": 0.15,
        "윤리경영": 0.10,
        "다양성 및 포용": 0.05
    },
    "금융": {
        "윤리경영": 0.25,
        "정보보안": 0.20,
        "리스크 관리": 0.20,
        "고객 및 제품책임": 0.15,
        "기후변화 대응": 0.10,
        "다양성 및 포용": 0.10
    },
    "default": {  # 기본 가중치
        "기후변화 대응": 0.18,
        "안전보건": 0.15,
        "윤리경영": 0.15,
        "리스크 관리": 0.12,
        "지역사회": 0.10,
        "정보보안": 0.10,
        "다양성 및 포용": 0.08,
        "고객 및 제품책임": 0.08,
        "공급망 관리": 0.04
    }
}

# ==============================================================================
# 🔧 하위 호환성을 위한 기존 변수들 (점진적 마이그레이션용)
# ==============================================================================

# 기존 코드와의 호환성 유지
STANDARD_ESG_ISSUES = {
    "환경": [issue for issue in UNIVERSAL_ESG_ISSUES["환경(E)"].keys()],
    "사회": [issue for issue in UNIVERSAL_ESG_ISSUES["사회(S)"].keys()],
    "지배구조": [issue for issue in UNIVERSAL_ESG_ISSUES["지배구조(G)"].keys()]
}

# 기존 ISSUE_KEYWORDS 구조 유지 (간소화된 버전)
ISSUE_KEYWORDS = {}
for category, issues in UNIVERSAL_ESG_ISSUES.items():
    for issue_name, issue_data in issues.items():
        ISSUE_KEYWORDS[issue_name] = issue_data["core_keywords"]

# 기존 ESG_KEYWORDS 구조 유지
ESG_KEYWORDS = {
    "환경": [],
    "사회": [],
    "지배구조": []
}

for category, issues in UNIVERSAL_ESG_ISSUES.items():
    category_key = category.split("(")[0]  # "환경(E)" -> "환경"
    for issue_data in issues.values():
        ESG_KEYWORDS[category_key].extend(issue_data["core_keywords"]) 